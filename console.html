<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
          "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>minipy toplevel</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="./css/bootstrap.min.css" />
    <link rel="stylesheet" href="./css/minipy.css" />
    <script type="text/javascript">

      window.onhashchange = function() { window.location.reload() }
      var hash = window.location.hash.replace(/^#/,"");
      var fields = hash.split(/&/);
      var prefix = "";
      var version = "";
      for(var f in fields){
        var data = fields[f].split(/=/);
        if(data[0] == "version"){
          version = data[1].replace(/%20|%2B/g,"+");
          break;
        }
      }
      function load_script(url){
        var fileref=document.createElement('script');
        fileref.setAttribute("type","text/javascript");
        fileref.setAttribute("src", prefix+(version==""?"":(version+"/"))+url);
        document.getElementsByTagName("head")[0].appendChild(fileref);
      }
      load_script("toplevel_js.bc.js");

    </script>
  </head>
  <body>
    <div id="toplevel-container">
      <pre id="output"></pre>
      <div>
        <div id="sharp" class="sharp"></div>
        <textarea id="userinput">Loading ...</textarea>
        <button type="button" class="btn btn-default"
                id="btn-share">Share</button>
        <button type="button" class="btn btn-default"
                id="btn-exec">Exec</button>
      </div>
    </div>
    <div id="toplevel-side">
      <h3>minipy</h3>
      <p>Get the code from the <a href="https://github.com/LaurentMazare/ocaml-minipy">ocaml-minipy GitHub repo</a>.</p>
      <p>This web-based Python interpreter is compiled using Js_of_ocaml
         and has been adapted from the
         <a href="https://ocsigen.org/js_of_ocaml/3.5.1/manual/files/toplevel/index.html">OCaml toplevel example</a>.</p>
      <h4>Command</h4>
      <table class="table table-striped table-condensed">
        <tbody class>
          <tr>
            <td>Enter/Return</td>
            <td>Newline</td>
          </tr>
          <tr>
            <td>Shift + Enter</td>
            <td>Submit code</td>
          </tr>
          <tr>
            <td>Up / Down</td>
            <td>Browse history</td>
          </tr>
          <tr>
            <td>Ctrl + l</td>
            <td>Clear display</td>
          </tr>
          <tr>
            <td>Ctrl + k</td>
            <td>Reset toplevel</td>
          </tr>
        </tbody>
      </table>
      <h4>Try to execute samples</h4>
      <div id="toplevel-examples" class="list-group"></div>
    </div>
  </body>
</html>
